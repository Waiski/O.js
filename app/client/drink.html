<template name="drinkTmpl">
  {{#with drink}}
    {{!--
      .drink-property-set -elements can be used for setting a property,
      .drink-property-show -elements display it
    --}}
    <div class="ui text container main-content{{#if editmode}} in-editmode{{else}} not-in-editmode{{/if}}"
         id="drink-page-container">

      <select
      id="drink-category-select"
      class="ui dropdown drink-property-set select editmode-visible"
      data-drink-property="categoryId">
        {{#each categories}}
          <option value="{{_id}}">{{name}}</option>
        {{/each}}
      </select>
      <p
      id="drink-category-show"
      class="drink-property-show{{#if editmode}} hidden{{/if}}"
      data-drink-property="categoryId"><em>{{getCategory}}</em> >></p>

      <h1 class="ui dividing header">
        <div class="content drink-property-set drink-property-show"
             id="drink-name"
             placeholder="Drink name"
             data-drink-property="name"
             contenteditable={{#if editmode}}true{{else}}false{{/if}}>{{name}}</div>
        <div class="sub header">
          <p
          id="drink-manufacturer"
          class="drink-property-set editmode-visible"
          placeholder="Manufacturer (or brewery, distillery...)"
          data-drink-property="manufacturer"
          contenteditable={{#if editmode}}true{{else}}false{{/if}}>{{getValue properties.manufacturer}}</p>
          <p
          id="drink-website"
          class="drink-property-set editmode-visible"
          placeholder="Manufacturer website URL"
          data-drink-property="website"
          contenteditable={{#if editmode}}true{{else}}false{{/if}}>{{getValue properties.website}}</p>
          {{#unless editmode}}
            {{>drinkManufacturer}}
          {{/unless}}
        </div>
      </h1>

      <div class="ui two column grid">
        <div class="column drink-details">
          <h3 class="ui dividing header">Details</h3>
          {{!TODO: define drink details in drink schema dynamically rather than here}}
          {{>drinkDetail name="region" label="Region" placeholder="Country and region" value=properties.region}}
          {{>drinkDetail name="strength" label="Alc-vol" placeholder="Alcohol vol-%" value=properties.strength}}
          {{>drinkDetail name="subcategory" label="Type" placeholder="(i.e. Pale ale, Bourbon)" value=properties.subcategory}}
          {{>drinkDetail name="temperature" label="Serving temp" placeholder="20Â°C" value=properties.temperature}}
        </div>
        <div class="column drink-description">
          <h3 class="ui dividing header">Description</h3>

          {{>drinkDetail name="description" placeholder="Description" value=properties.description}}
        </div>
      </div>

      <div class="ui one column grid">
        <div class="column">
          <div class="ui huge black link label {{#unless editmode}}clickable{{/unless}}" id="drink-price">
            Price: 
            <strong
            class="drink-property-set drink-property-show"
            placeholder="Price"
            data-drink-property="price"
            contenteditable={{#if editmode}}true{{else}}false{{/if}}>{{price}}</strong>
          </div>
        </div>
      </div>
    </div>

    {{>drinkDeleteConfirmModal}}
    {{>userTabsModal}}
  {{/with}}
</template>

<template name="drinkDetail">
  <div class="drink-detail-row">
    {{#if label}}
      <div class="drink-detail-label">
        {{label}}
      </div>
    {{/if}}
    <div class="drink-detail-value">
      <p id="drink-{{name}}"
         class="drink-property-set drink-property-show"
         placeholder="{{placeholder}}"
         data-drink-property="{{name}}"
         contenteditable={{#if editmode}}true{{else}}false{{/if}}>{{getValue}}</p>
    </div>
    <div class="clearfix"></div>
  </div>
</template>

<template name="drinkManufacturer">
  <div class="drink-property-show">
    {{#if hasValidUrl}}
      <a href="{{getUrl}}" target="_blank">{{getValue properties.manufacturer}}</a>
    {{else}}
      <p>{{getValue properties.manufacturer}}</p>
    {{/if}}
  </div>
</template>

<template name="drinkDeleteConfirmModal">
  <div class="ui modal" id="drink-delete-confirm-modal">
    <div class="header">Confirm drink delete</div>
    <div class="content">
      <p>Are you sure you want to delete this drink? This action is irreversible.</p>
    </div>
    <div class="actions">
      <div class="ui black cancel button">Cancel</div>
      <div class="ui positive approve button">OK</div>
    </div>
  </div>
</template>